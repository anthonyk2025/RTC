<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>RTC Collab â€” Room</title>
    <link rel="stylesheet" href="./styles.css"/>
</head>
<body>

    <div class="room-container">
        <header class="room-header">
            <div class="logo-container-left">
                <svg viewBox="0 0 220 48" xmlns="http://www.w3.org/2000/svg" class="main-logo">
                    <defs>
                        <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                        </linearGradient>
                        <filter id="headerShadow" x="-50%" y="-50%" width="200%" height="200%">
                            <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.25"/>
                        </filter>
                    </defs>
                    <g transform="translate(4, 4)">
                        <circle cx="20" cy="20" r="18" fill="url(#headerGrad)" filter="url(#headerShadow)"/>
                        <g opacity="0.95">
                            <circle cx="15" cy="15" r="2.5" fill="white" opacity="0.95"/>
                            <circle cx="25" cy="15" r="2.5" fill="white" opacity="0.95"/>
                            <circle cx="20" cy="25" r="2.5" fill="white" opacity="0.95"/>
                            <path d="M15 15 L25 15 M20 17.5 L20 22.5" stroke="white" stroke-width="1.8" opacity="0.85" stroke-linecap="round"/>
                            <path d="M17.5 17.5 L22.5 17.5" stroke="white" stroke-width="1.2" opacity="0.7" stroke-linecap="round"/>
                            <circle cx="20" cy="20" r="2.2" fill="white"/>
                            <line x1="16.5" y1="16.5" x2="17.8" y2="17.8" stroke="white" stroke-width="1.3" opacity="0.8" stroke-linecap="round"/>
                            <line x1="23.5" y1="16.5" x2="22.2" y2="17.8" stroke="white" stroke-width="1.3" opacity="0.8" stroke-linecap="round"/>
                            <line x1="20" y1="22.8" x2="20" y2="22.2" stroke="white" stroke-width="1.3" opacity="0.8" stroke-linecap="round"/>
                        </g>
                    </g>
                    <g transform="translate(52, 0)">
                        <text x="0" y="22" font-family="'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif" 
                              font-size="20" font-weight="700" fill="#ffffff" letter-spacing="-0.3px">RTC</text>
                        <text x="0" y="38" font-family="'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif" 
                              font-size="11" font-weight="500" fill="#e5e7eb" letter-spacing="0.4px">Collab</text>
                        <rect x="0" y="25" width="42" height="1.2" fill="#60a5fa" opacity="0.8" rx="0.6"/>
                        <text x="50" y="26" font-family="'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif" 
                              font-size="8" font-weight="500" fill="#d1d5db" letter-spacing="0.6px" text-transform="uppercase">Real-Time Collaboration</text>
                    </g>
                </svg>
            </div>
            
            <div class="header-right-controls">
                <div class="mobile-nav-wrapper">
                    <button id="menu-toggle" class="menu-toggle" aria-controls="controls-menu" aria-expanded="false" aria-label="Toggle navigation menu">
                        <span class="hamburger-bar"></span>
                        <span class="hamburger-bar"></span>
                        <span class="hamburger-bar"></span>
                    </button>
                    <div id="controls-menu" class="controls">
                        <button id="btn-mic" class="control-btn" title="Toggle Microphone">
                            <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2.66 0 1.2.54 1.2 1.2l-.01 6.2c0 .66-.53 1.2-1.19 1.2s-1.2-.54-1.2-1.2V4.9zm6.5 6.1c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></svg>
                            <span>Mic Off</span>
                        </button>
                        <button id="btn-cam" class="control-btn" title="Toggle Camera">
                            <svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></svg>
                            <span>Cam Off</span>
                        </button>
                        <button id="btn-screen" class="control-btn" title="Share Screen">
                            <svg viewBox="0 0 24 24"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.33V7l4 3.73-4 3.74z"></path></svg>
                            <span>Share Screen</span>
                        </button>
                        <button id="btn-whiteboard" class="control-btn" title="Toggle Whiteboard">
                            <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>
                            <span>Whiteboard</span>
                        </button>
                        <button id="btn-clearboard" class="control-btn" title="Clear Whiteboard">
                            <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg>
                            <span>Clear Board</span>
                        </button>
                        <label class="control-btn file-label">
                            <svg viewBox="0 0 24 24"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path></svg>
                            <span>Send File</span>
                            <input type="file" id="file-input" style="display: none;" />
                        </label>
                        <button id="btn-copy-link" class="control-btn" title="Copy Invite Link">
                            <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>
                            <span>Copy Invite</span>
                        </button>
                    </div>
                </div>
                <div class="session-controls">
                    <button id="btn-leave" class="control-btn leave-btn">
                        <svg viewBox="0 0 24 24"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>
                        <span>Leave</span>
                    </button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div id="videos" class="video-grid"></div>
            <canvas id="board" class="whiteboard-overlay"></canvas>
        </main>

        <aside class="sidebar">
            <div class="sidebar-tabs">
                <button class="tab-nav-btn active" data-target="#chat-panel">Chat</button>
                <button class="tab-nav-btn" data-target="#files-panel">Files</button>
            </div>
            <div class="sidebar-panels">
                <div id="chat-panel" class="tab-content active">
                    <div id="chat-log" class="chat-messages"></div>
                    <form id="chat-form" class="chat-form">
                        <input id="chat-input" class="chat-input" placeholder="Type a message..." autocomplete="off">
                        <button type="submit" class="chat-send-btn" title="Send">
                            <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                        </button>
                    </form>
                </div>
                <div id="files-panel" class="tab-content">
                    <div id="files" class="file-log"></div>
                </div>
            </div>
        </aside>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="./whiteboard.js"></script>
    <script src="./fileShare.js"></script>
    <script src="./room.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.getElementById('menu-toggle');
            const navWrapper = document.querySelector('.mobile-nav-wrapper');

            if (menuToggle && navWrapper) {
                menuToggle.addEventListener('click', () => {
                    const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                    menuToggle.setAttribute('aria-expanded', !isExpanded);
                    navWrapper.classList.toggle('is-open');
                });
            }
        });
    </script>
</body>
</html>